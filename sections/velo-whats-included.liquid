{{ 'velo-whats-included.css' | asset_url | stylesheet_tag }}

{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}

<div class="velo-included-section section-{{ section.id }}-padding color-{{ section.settings.color_scheme }} gradient">
  <div class="page-width">
    <div class="velo-inc-layout">

      <!-- Left: table of items -->
      <div class="velo-inc-table-col">
        <h2 class="velo-inc-heading">{{ section.settings.heading | default: "What's Included with" }}<br><strong>{{ section.settings.heading_bold | default: 'Your VELO Chair' }}</strong></h2>

        <div class="velo-inc-list">
          <!-- Main product row -->
          {%- assign item_blocks = section.blocks | where: 'type', 'item' -%}
          {% for block in item_blocks %}
            {% if block.settings.is_free == false %}
              <div class="velo-inc-item velo-inc-item--main" {{ block.shopify_attributes }}>
                <span class="velo-inc-name">{{ block.settings.title }}</span>
                <div class="velo-inc-item-right">
                  {% if block.settings.original_price != blank %}
                    <span class="velo-inc-original">{{ block.settings.original_price }}</span>
                  {% endif %}
                  <span class="velo-inc-final">{{ block.settings.final_price }}</span>
                </div>
              </div>
            {% endif %}
          {% endfor %}

          <!-- "If you order today" label -->
          {% if section.settings.order_today_label != blank %}
            <div class="velo-inc-order-today-label">{{ section.settings.order_today_label }}</div>
          {% endif %}

          <!-- Free items -->
          {% for block in item_blocks %}
            {% if block.settings.is_free %}
              <div class="velo-inc-item" {{ block.shopify_attributes }}>
                <span class="velo-inc-name velo-inc-name--free">{{ block.settings.title }}</span>
                <div class="velo-inc-item-right">
                  {% if block.settings.original_price != blank %}
                    <span class="velo-inc-original">{{ block.settings.original_price }}</span>
                  {% endif %}
                  <span class="velo-inc-free-badge">FREE</span>
                </div>
              </div>
            {% endif %}
          {% endfor %}
        </div>

        <div class="velo-inc-divider"></div>

        <!-- Savings row -->
        {% if section.settings.savings_label != blank %}
          <div class="velo-inc-savings-row">
            <span class="velo-inc-savings-label">{{ section.settings.savings_label }}</span>
            <span class="velo-inc-savings-value">{{ section.settings.savings_value | default: 'You Save $203' }}</span>
          </div>
        {% endif %}

        <!-- Subtotal row -->
        <div class="velo-inc-total">
          <span class="velo-inc-total-label">{{ section.settings.total_label | default: 'Subtotal' }}</span>
          <div class="velo-inc-total-right">
            {% if section.settings.free_gifts_count != blank %}
              <span class="velo-inc-gifts-badge">+{{ section.settings.free_gifts_count }} FREE GIFTS</span>
            {% endif %}
            <span class="velo-inc-total-price">{{ section.settings.total_price | default: '$397' }}</span>
          </div>
        </div>

        {% if section.settings.cta_text != blank %}
          <a href="{{ section.settings.cta_link | default: '#' }}" class="velo-inc-cta button">
            {{ section.settings.cta_text }}
          </a>
        {% endif %}

        <!-- Mini trust strip -->
        <div class="velo-inc-trust">
          <span>
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2"/><path d="M15 18H9"/><path d="M19 18h2a1 1 0 0 0 1-1v-4.2a2 2 0 0 0-.6-1.4l-2.4-2.4a2 2 0 0 0-1.4-.6H15"/><circle cx="7" cy="18" r="2"/><circle cx="17" cy="18" r="2"/></svg>
            Ship Today
          </span>
          <span>
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"/><path d="M16 16h5v5"/></svg>
            90-Day Easy Returns
          </span>
        </div>
      </div>

      <!-- Right: product image -->
      <div class="velo-inc-image-col">
        {% if section.settings.product_image != blank %}
          <img
            src="{{ section.settings.product_image | image_url: width: 700 }}"
            alt="{{ section.settings.product_image.alt | default: 'VELO Chair bundle' }}"
            loading="lazy"
            width="700"
            class="velo-inc-product-image"
          >
        {% else %}
          <img
            src="https://images.unsplash.com/photo-1567538096630-e0c55bd6374c?ixlib=rb-4.0.3&auto=format&fit=crop&w=700&q=80"
            alt="VELO Freedom Chair"
            loading="lazy"
            width="700"
            class="velo-inc-product-image"
          >
        {% endif %}

        {% if section.settings.badge_text != blank %}
          <div class="velo-inc-starburst">{{ section.settings.badge_text }}</div>
        {% endif %}

        <!-- Annotations -->
        {% if section.settings.annotation_1 != blank %}
          <div class="velo-inc-anno velo-inc-anno--1">
            <span class="velo-inc-anno-text">{{ section.settings.annotation_1 }}</span>
            <svg class="velo-inc-anno-arrow" width="40" height="40" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M10,10 Q50,90 90,80" fill="none" stroke="currentColor" stroke-width="2" marker-end="url(#arrowhead)"/></svg>
          </div>
        {% endif %}
        {% if section.settings.annotation_2 != blank %}
          <div class="velo-inc-anno velo-inc-anno--2">
            <span class="velo-inc-anno-text">{{ section.settings.annotation_2 }}</span>
            <svg class="velo-inc-anno-arrow" width="40" height="40" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M10,10 Q50,90 90,80" fill="none" stroke="currentColor" stroke-width="2" marker-end="url(#arrowhead)"/></svg>
          </div>
        {% endif %}

        <svg style="width:0;height:0;position:absolute;" aria-hidden="true" focusable="false">
          <defs>
            <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
              <polygon points="0 0, 10 3.5, 0 7" fill="currentColor" />
            </marker>
          </defs>
        </svg>
      </div>

    </div>
  </div>
</div>

{% schema %}
{
  "name": "VELO What's Included",
  "tag": "section",
  "class": "velo-section",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top padding",
      "default": 80
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding",
      "default": 80
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading (light)",
      "default": "What's Included with"
    },
    {
      "type": "text",
      "id": "heading_bold",
      "label": "Heading (bold)",
      "default": "Your VELO Chair"
    },
    {
      "type": "text",
      "id": "order_today_label",
      "label": "Order Today Label",
      "default": "IF YOU ORDER TODAY:"
    },
    {
      "type": "text",
      "id": "savings_label",
      "label": "Savings Label",
      "default": "Savings"
    },
    {
      "type": "text",
      "id": "savings_value",
      "label": "Savings Value",
      "default": "You Save $203"
    },
    {
      "type": "text",
      "id": "total_label",
      "label": "Total Label",
      "default": "Subtotal"
    },
    {
      "type": "text",
      "id": "total_price",
      "label": "Total Price",
      "default": "$397"
    },
    {
      "type": "text",
      "id": "free_gifts_count",
      "label": "Free Gifts Count (shows badge)",
      "default": "4"
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "CTA Button Text",
      "default": "SHOP NOW"
    },
    {
      "type": "url",
      "id": "cta_link",
      "label": "CTA Button Link"
    },
    {
      "type": "image_picker",
      "id": "product_image",
      "label": "Product Image (right side)"
    },
    {
      "type": "text",
      "id": "badge_text",
      "label": "Starburst badge text",
      "default": "FREE Gifts Included ($115 value)"
    },
    {
      "type": "header",
      "content": "Image Annotations"
    },
    {
      "type": "text",
      "id": "annotation_1",
      "label": "Annotation 1 Text",
      "default": "FREE Mouse Pad"
    },
    {
      "type": "text",
      "id": "annotation_2",
      "label": "Annotation 2 Text",
      "default": "FREE Chair Mat"
    }
  ],
  "blocks": [
    {
      "type": "item",
      "name": "Included Item",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Item Name",
          "default": "VELO Freedom Chair"
        },
        {
          "type": "text",
          "id": "original_price",
          "label": "Original Price (strikethrough)",
          "default": "$600.00"
        },
        {
          "type": "text",
          "id": "final_price",
          "label": "Final Price",
          "default": "$397"
        },
        {
          "type": "checkbox",
          "id": "is_free",
          "label": "Show as FREE item",
          "default": false
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "VELO What's Included",
      "blocks": [
        { "type": "item", "settings": { "title": "VELO Freedom Chair", "original_price": "$600.00", "final_price": "$397", "is_free": false } },
        { "type": "item", "settings": { "title": "Fast U.S. Shipping", "original_price": "$14.00", "final_price": "FREE", "is_free": true } },
        { "type": "item", "settings": { "title": "Mouse Pad", "original_price": "$23.00", "final_price": "FREE", "is_free": true } },
        { "type": "item", "settings": { "title": "Chair Mat", "original_price": "$49.00", "final_price": "FREE", "is_free": true } },
        { "type": "item", "settings": { "title": "3-Year Warranty", "original_price": "$29.00", "final_price": "FREE", "is_free": true } }
      ]
    }
  ]
}
{% endschema %}
